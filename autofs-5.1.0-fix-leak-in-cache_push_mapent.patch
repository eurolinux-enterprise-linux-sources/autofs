autofs-5.1.0 - fix leak in cache_push_mapent()

From: Ian Kent <raven@themaw.net>

cache_push_mapent() incorectly sets the cache entry mapent to the old
value which causes a memory leak when the new map entry isn't NULL.
---
 CHANGELOG   |    1 +
 lib/cache.c |    2 +-
 2 files changed, 2 insertions(+), 1 deletion(-)

--- autofs-5.0.5.orig/CHANGELOG
+++ autofs-5.0.5/CHANGELOG
@@ -221,6 +221,7 @@
 - allow empty value in macro selectors.
 - add serialization to sasl init.
 - dont allocate dev_ctl_ops too early.
+- fix leak in cache_push_mapent().
 
 03/09/2009 autofs-5.0.5
 -----------------------
--- autofs-5.0.5.orig/lib/cache.c
+++ autofs-5.0.5/lib/cache.c
@@ -203,7 +203,7 @@ int cache_push_mapent(struct mapent *me,
 
 	s->mapent = me->mapent;
 	s->age = me->age;
-	me->mapent = mapent;
+	me->mapent = new;
 
 	if (me->stack)
 		s->next = me->stack;
