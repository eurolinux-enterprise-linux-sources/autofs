autofs-5.1.0 - fix incorrect round robin host detection

From: Ian Kent <raven@themaw.net>


---
 CHANGELOG            |    1 +
 modules/replicated.c |    2 +-
 2 files changed, 2 insertions(+), 1 deletion(-)

--- autofs-5.0.7.orig/CHANGELOG
+++ autofs-5.0.7/CHANGELOG
@@ -128,6 +128,7 @@
 - allow empty value in macro selectors.
 - add serialization to sasl init.
 - dont allocate dev_ctl_ops too early.
+- fix incorrect round robin host detection.
 
 25/07/2012 autofs-5.0.7
 =======================
--- autofs-5.0.7.orig/modules/replicated.c
+++ autofs-5.0.7/modules/replicated.c
@@ -946,7 +946,7 @@ try_name:
 	}
 
 	this = ni;
-	while (this->ai_next) {
+	while (this) {
 		if (this->ai_family == AF_INET) {
 			struct sockaddr_in *addr = (struct sockaddr_in *) this->ai_addr;
 			if (addr->sin_addr.s_addr != INADDR_LOOPBACK)
