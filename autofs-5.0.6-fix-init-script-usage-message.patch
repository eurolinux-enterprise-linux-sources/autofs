autofs-5.0.6 - fix init script usage message

From: Ian Kent <ikent@redhat.com>

Changes made to the autofs init script based on lsb compliance resulted
in a stupid change where the init script requires users to type:

/sbin/service autofs usage

to show proper usage.

Maybe it was a misunderstanding of the lsb documentation but it is still
not sensible. Change to issue the usage message when an umknown parameter
is passed but retain the return codes.
---

 CHANGELOG             |    1 +
 redhat/autofs.init.in |    8 ++++++--
 2 files changed, 7 insertions(+), 2 deletions(-)


--- autofs-5.0.5.orig/redhat/autofs.init.in
+++ autofs-5.0.5/redhat/autofs.init.in
@@ -151,6 +151,10 @@ function reload() {
 	return $RETVAL
 }
 
+function usage_message() {
+	echo $"Usage: $0 {start|forcestart|stop|status|restart|force-reload|forcerestart|reload|condrestart|try-restart}"
+}
+
 RETVAL=0
 
 # Only the root user may change the service status
@@ -189,11 +193,11 @@ case "$1" in
 		fi
 		;;
 	usage)
-		echo $"Usage: $0 {start|forcestart|stop|status|restart|force-reload|forcerestart|reload|condrestart|try-restart}"
+		usage_message
 		exit 0;
 		;;
 	*)
-		echo "unknown, invalid or excess argument(s)"
+		usage_message
 		exit 2
 		;;
 esac
--- autofs-5.0.5.orig/CHANGELOG
+++ autofs-5.0.5/CHANGELOG
@@ -77,6 +77,7 @@
 - add sss lookup module.
 - teach automount about sss source.
 - fix fix map source check in file lookup.
+- fix init script usage message.
 
 03/09/2009 autofs-5.0.5
 -----------------------
